---
layout: article
title: 再帰処理で求めるnPr
tags: JavaScript
aside:
  toc: true
---

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

## この記事について

以下の説明をしています。

-   順列(nPr)とは何か
-   再帰処理とは何か
-   順列を出力するサンプルプログラムの紹介

# 順列とは

そもそも順列とは何かを解説します。
順列とは、「異なるn個のものからr個を取り出して並べる」ときの並び順の数です。

![image](https://user-images.githubusercontent.com/44778704/87756385-ce6f8300-c843-11ea-8315-1d6f5ba5e241.png)

## nCr との違いに注意

注意しなければならないのは、`「1:ねずみ」「2:うし」`と`「1:うし」「2:ねずみ」`は異なる組み合わせだという点です。<br>

![image](https://user-images.githubusercontent.com/44778704/87757215-3d011080-c845-11ea-8f8a-fbdd8010266b.png)

これを「同じ組み合わせ」とみなす考え方は `nCr`です。<br>
この2つはよく混同されますが**別物**なので気をつけてください。

## 順列の求め方

公式に当てはめて解くことが可能です。<br>
難しく見えますが紐解くと簡単&単純です。<br>
数学アレルギーの方も戻るボタンを押さずに頑張って一緒に解きましょう！<br>

### 公式
以下が公式です。<br>
\$$ nPr = \frac{n!}{(n-r)!} $$

### 3P2で解いてみる
これを数字`3P2`に置き換えると以下のようになります。<br>
<img src="https://latex.codecogs.com/gif.latex?\large&space;_{3}P_{2}=\frac{3!}{(3-2)!}" />

\$$ _{3}P_{2}=\frac{3!}{(2-1)!} $$

`!`記号は階乗と呼ばれる数です。<br>
直前の数から 1 までを掛け合わせるという意味を持ちます。<br>
例えば`5!`は`5×4×3×2×1`と同じです。<br>
<br>
これを先ほどの式に当てはめると以下のようになります。<br>
\$$ _{3}P_{2}=\frac{3\times 2 \times1}{1} $$

3P2 の答えは「6」になりました

### 4P2で解いてみる

4P2 を数式に当てはめると以下のようになります。<br>
![image](https://user-images.githubusercontent.com/44778704/87762649-6f633b80-c84e-11ea-9c34-8b54f1705ab5.png)
<img src= "" />


さらに、階乗を分解すると以下のようになります。<br>
![image](https://user-images.githubusercontent.com/44778704/87762871-c0732f80-c84e-11ea-953e-22c5ecc1a347.png)
<img src= "" />


4P2 の答えは「12」になりました

### 余談: 簡単な解き方

<img src= "" />
<img src= "" />
<img src= "" />


### プログラムサンプル

紹介した順列の数式をもとにコードを書いてみます。

```js
const permutation = (n, r) => {
  const result = [];

  // 文字数チェック
  if (n.length < r) return [];

  // r が 1 なら
  if (r === 1) {
    for (let i = 0; i < n.length; i++) {
      result[i] = [n[i]];
    }
    return result;
  }
  for (let i = 0; i < n.length; i++) {
    const parts = n.slice(0);
    parts.splice(i, 1)[0];
    let row = permutation(parts, r - 1);
    for (let j = 0; j < row.length; j++) {
      result.push([n[i]].concat(row[j]));
      console.log([n[i]].concat(row[j]));
    }
  }

  return result;
};

let arr = permutation([""], 1);
console.log(JSON.stringify(arr));
// [["a","b"],["a","c"],["b","a"],["b","c"],["c","a"],["c","b"]]
```

# 参考

-   「nCr」についての記事ですが、説明文がわかりやすかったので参考にしました<br>
    [５分で分かる！確率統計「nCr」の計算方法](https://blog.apar.jp/data-analysis/3927/)

-   ソースコードはこちらを参考にしました<br>
    [順列・組み合わせ のサンプルコード JS \[permutation\] \[combination\]](https://tech-blog.s-yoshiki.com/entry/144#%E9%A0%86%E5%88%97---permutation)
